<!DOCTYPE html>
<html>
<head>
    <title>Swimmers Network</title>
    <meta name="viewport" content="width=device-width">
    <link rel='shortcut icon' href='favicon.ico' type='image/x-icon'/>

    <link rel="stylesheet" href="components/bootstrap/dist/css/bootstrap.min.css">

    <!-- injector:css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endinjector -->
</head>
<body ng-app="swimmerApp">

<!-- contents come here -->
<div class="container" ng-controller="MainCtrl">

    <!-- header -->
<!--     <header>
        <div class="title"> Swimmers Network </div>
        <div class="desc"> Who competes against who at races of major meets </div>
        <div class="source"> data from <a href="https://www.swimrankings.net" target="_blacnk">Swim Rankings</a></div>
    </header> -->

    <!-- main contents -->
    <div class="row">

        <!-- gender change -->
        <!-- <div class="col-xs-12 gender-switch">Switch to {{ genderToSwitch }}</div> -->

        <!-- options -->
        <div class="col-xs-2 options">

            <!-- search -->
            <div class="search">
                Search:
                <input type="text">
            </div>

            <!-- meets -->
            <div ng-repeat="kind in ['meets', 'events']">
                <div class="title" ng-class="kind"> {{ kind }} </div>
                <ul class="select-list">
                    <li ng-repeat="(key, val) in category[kind]">
                        <div class="list-title">
                            <span class="list-title-text">{{ val.name }}</span>
                            <span ng-show="selParent[kind][key]"><a ng-click="filterParent(kind, key)">hide </a></span>
                            <span ng-hide="selParent[kind][key]"><a ng-click="filterParent(kind, key)"> show </a></span>
                        </div>
                        <ul>
                            <li ng-repeat="child in val.children" class="list-item">
                                <input type="checkbox" ng-model="sel[kind][key][child[0]]" ng-change="updateParentStatus(kind, key, child[0])">
                                {{ child[1] }}
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <!-- graph -->
        <div class="col-xs-6">

            <!-- option summary -->
            <div class="summary">
                <span ng-repeat="kind in ['meets', 'events']">
                    <span ng-repeat="(key, val) in sel[kind]">
                        <span ng-class="kind" ng-if="selParent[kind][key]">
                            {{ key.slice(1) }}
                            <span ng-repeat="(k, v) in val">
                                <span ng-if="sel[kind][key][k]"> {{ k }} </span>
                            </span>
                        </span>
                    </span>
                </span>
                total {{ selectedAthletes.length }} swimmers
            </div>

            <!-- vis -->
            <div class="vis">
                <svg id="vis" width="100%"></svg>
            </div>
        </div>

        <!-- user detail table -->
        <div class="col-xs-4 user-info">
            <table class="table table-condensed">
                <thead>
                    <tr>
                        <th></th>
                         <!-- repeat athlete's name -->
                        <th ng-repeat="a in athletesOnFocus" class="athlete-name">
                            {{ a.name }} <br/>
                            {{ a.country }} <br/>
                            {{ a.count }} races
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <!-- repeat race -->
                    <tr ng-repeat="r in sharedRaces">
                        <td class="race-name">
                            {{ r.split('-')[0].slice(1) }}
                            {{ r.split('-')[1] }}
                            {{ r.split('-')[4] }}
                        </td>
                        <!-- repeat athlete's recore -->
                        <td ng-repeat="a in athletesOnFocus" ng-class="sharedRacesWinner[$parent.$index].indexOf($index) > -1 ? 'winner' : 'regular'">
                            <!--TODO: add medal icon -->
                            {{ a.records[r].place }}. {{ a.records[r].swimtime }}
                        </td>
                    </tr>
                    <tr ng-if="sharedRaces.length == 0 && athletesOnFocus.length > 0">
                        <td colspan="{{ athletesOnFocus.length + 1 }}">
                            These swimmers did not competed against each other.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>

    <!-- loading -->
    <div class="row" ng-hide="loaded">
        <div class="col-xs-12">Loading</div>
    </div>

    <!-- footer -->
    <div class="row footer">
        <div class="col-xs-12">
            <div class="desc">
                Made by <a href="http://tany.kim" target="_blank"> Tanyoung Kim</a> |
                View at <a href="https://github.com/tanykim/2016-Olympics-Team-USA" tager="_blank">GitHub </a>
            </div>
        </div>
    </div>
</div>

<!-- bower:js -->
<script src="components/angular/angular.js"></script>
<script src="components/d3/d3.js"></script>
<script src="components/underscore/underscore.js"></script>
<script src="components/jquery/dist/jquery.js"></script>
<script src="components/bootstrap/dist/js/bootstrap.js"></script>
<!-- endbower -->

<!-- injector:js -->
<script src="scripts/app.js"></script>
<script src="scripts/main.js"></script>
<script src="scripts/processor.js"></script>
<script src="scripts/visualizer.js"></script>
<!-- endinjector -->
</body>
</html>